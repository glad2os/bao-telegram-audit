# –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è c OpenBao

–≠—Ç–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–æ –¥–ª—è –ø—Ä–∏—ë–º–∞ –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –ª–æ–≥–æ–≤ –∞—É–¥–∏—Ç–∞ –æ—Ç **OpenBao** —á–µ—Ä–µ–∑ TCP-—Å–æ–∫–µ—Ç. –û–Ω–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–æ–±–∏—Ä–∞—Ç—å –∏ —Ñ–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å –∞—É–¥–∏—Ç–æ—Ä—Å–∫–∏–µ –∑–∞–ø–∏—Å–∏, –ø–µ—Ä–µ–¥–∞–≤–∞–µ–º—ã–µ –æ—Ç OpenBao, —Ä–µ—Ç—Ä–∞–Ω—Å–ª–∏—Ä—É—è –∏—Ö –≤ Telegram

## –í–∫–ª—é—á–µ–Ω–∏–µ –∞—É–¥–∏—Ç–∞

–î–ª—è —Ç–æ–≥–æ —á—Ç–æ–±—ã –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å OpenBao –Ω–∞ –æ—Ç–ø—Ä–∞–≤–∫—É –ª–æ–≥–æ–≤ –∞—É–¥–∏—Ç–∞ –≤ –≤–∞—à–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ, –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –≤–∫–ª—é—á–∏—Ç—å –∞—É–¥–∏—Ç–æ—Ä—Å–∫–æ–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º **TCP-—Å–æ–∫–µ—Ç–∞**.

1. **–í–∫–ª—é—á–µ–Ω–∏–µ –∞—É–¥–∏—Ç–∞ Kubernetes**:

   ```shell
   bao audit enable socket address=bao-telegram-svc.default.svc.cluster.local:9090 socket_type=tcp
   ```

2. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏**:

   ```shell
   bao audit list
   ```

## –û—Ç–ª–∞–¥–∫–∞

1. –ó–∞–ø—É—Å–∫ OpenBao –≤ **dev**-—Ä–µ–∂–∏–º–µ:

   ```shell
   bao server -dev -dev-root-token-id="dev-only-token"
   ```

2. –í–∫–ª—é—á–µ–Ω–∏–µ –∞—É–¥–∏—Ç–∞ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —á–µ—Ä–µ–∑ —Å–æ–∫–µ—Ç:

   ```shell
   bao audit enable socket address=localhost:9090 socket_type=tcp
   ```

3. –ê–∫—Ç–∏–≤–∞—Ü–∏—è **KV Secret Engine**:

   ```shell
   bao secrets enable -path=secret kv
   ```

4. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞—É–¥–∏—Ç–∞:

   ```shell
   bao kv put secret/foo bar=baz
   bao kv get secret/foo
   ```

5. –õ–æ–≥–∏ –∞—É–¥–∏—Ç–∞ –±—É–¥—É—Ç –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω—ã –Ω–∞ –ª–æ–∫–∞–ª—å–Ω—ã–π —Å–æ–∫–µ—Ç `localhost:9090` –∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å—Å—è Go –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º.

## –ö–∞–∫ –∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–µ—Ä

### –õ–æ–∫–∞–ª—å–Ω–æ

1. –°–æ–±–µ—Ä–∏—Ç–µ –∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ Go TCP-—Å–µ—Ä–≤–µ—Ä, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –ø—Ä–æ—Å–ª—É—à–∏–≤–∞—Ç—å –≤—Ö–æ–¥—è—â–∏–µ –∞—É–¥–∏—Ç–æ—Ä—Å–∫–∏–µ –∑–∞–ø–∏—Å–∏:

   ```shell
   go run main.go
   ```

   –°–µ—Ä–≤–µ—Ä –±—É–¥–µ—Ç —Å–ª—É—à–∞—Ç—å –ø–æ—Ä—Ç `9090` –∏ –ø—Ä–∏–Ω–∏–º–∞—Ç—å –≤—Å–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –æ—Ç OpenBao.

2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–ø—É—â–µ–Ω–æ –∏ –≤—ã–≤–æ–¥–∏—Ç –ª–æ–≥–∏ –∞—É–¥–∏—Ç–∞ –≤ –∫–æ–Ω—Å–æ–ª—å.

### Kubernetes
#### –¢–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –∏–º–µ–µ—Ç default Service Account. –ù–µ –≤—ã–ø—É—Å–∫–∞—Ç—å –≤ –ø—Ä–æ–¥–∞–∫—à–Ω –±–µ–∑ RBAC
1. –ü—Ä–∏–º–µ–Ω–∏—Ç–µ –º–∞–Ω–∏—Ñ–µ—Å—Ç—ã **Deployment** –∏ **Service**.
2. –ü–æ—Å–ª–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ, –∏ OpenBao –º–æ–∂–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –∞—É–¥–∏—Ç–æ—Ä—Å–∫–∏–µ –∑–∞–ø–∏—Å–∏ –Ω–∞ —É–∫–∞–∑–∞–Ω–Ω—ã–π –∞–¥—Ä–µ—Å.
3. Helm chart –¥–æ–ø–∏—à—É –ø–æ–∑–∂–µ ü§°
